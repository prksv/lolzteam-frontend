import axios from "axios";

export interface Meta {
  current_page: number;
  from: number;
  last_page: number;
  links: Link[];
  path: string;
  per_page: number;
  to: number;
  total: number;
}

export interface Link {
  url?: string;
  label: string;
  active: boolean;
}

export interface Response<Data> {
  success: "ok" | "error";
  message: string;
  data: Data;
  meta?: Meta;
}

const api = axios.create({
  baseURL: `${import.meta.env.VITE_API_URL}/api`,
});

api.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token) {
    config.headers["Authorization"] = `Bearer ${token}`;
  }

  config.headers["ngrok-skip-browser-warning"] = "1337";

  return config;
});

export default api;
